<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: timetableio.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: timetableio.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Methods for file input and output to timetable database.
 */

const fs = require('fs');
const timetable = require('./timetable');

/**
 * Filename of timetable database
 */
const FILENAME = "./data/timetable.json"

/**
 * Asynchronously read the timetable from the database file.
 * 
 * @param callback {function} - code to be executed after database loads.  Takes parameters (String err, Timetable timetable).  
 * 		If an error occurs while loading the database, then err will contain the error and timetable will be null.
 *      If the database loads successfully, then err will be null and timetable will contain the timetable.
 */
function readTimetable(callback) {
	fs.readFile(FILENAME, 'utf8', function(err, data) {
		if (err) {
			callback(err, null);
		}
		
		let ttable = new timetable.Timetable(JSON.parse(data));

		callback(null, ttable);
	})
}

/**
 * Write the timetable to the database file.  If an error occurs while writing, then the error is thrown.
 * 
 * @param timetable {Timetable} - timetable to be written
 */
//TODO Return the error.
function writeTimetable(timetable, callback) {
	console.log("Writing ", timetable.toJSON());
	fs.writeFile(FILENAME, timetable.toJSON(), (err) => {
		callback(err);
	});
}

module.exports = {FILENAME, readTimetable, writeTimetable};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Timetable.html">Timetable</a></li></ul><h3>Global</h3><ul><li><a href="global.html#FILENAME">FILENAME</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#HOURS_IN_WEEK">HOURS_IN_WEEK</a></li><li><a href="global.html#readTimetable">readTimetable</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#TITLE">TITLE</a></li><li><a href="global.html#VIEW">VIEW</a></li><li><a href="global.html#writeTimetable">writeTimetable</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Apr 17 2017 17:05:09 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
